## New Feature 1: Email Summarization via Hugging Face

### Endpoint

```
POST /process-email-agent
```

## Description

This feature summarizes the email body using the `facebook/bart-large-cnn` model hosted on Hugging Face's inference API. It trims the content to 3000 characters (model input limit) before sending it for summarization.

### Request Payload

```json
{
  "text": "Full email body here, ideally trimmed client-side before submission."
}
```

### Response

```json
{
  "summary": "A concise version of the email content.",
  "tags": ["job", "invoice"]
}
```

## Tags

Tags are auto-generated by matching keywords in the summary text. Current categories:

- `invoice`: invoice, payment, due, balance

- `meeting`: meeting, schedule, calendar, zoom

- `personal`: family, vacation, birthday, dinner

- `job`: resume, interview, application, job

- `phishing`: urgent, click here, account suspended, verify

## Failure Scenarios

- Missing text → `400 Bad Request`

- Model call failure or invalid response → `500 Internal Server Error`

## New Feature 2: Forward Email to Slack

### Endpoint

```http
POST /forward-to-slack
```

## Description

Sends the selected email to a Slack channel using a pre-configured SLACK_WEBHOOK_URL. It includes sender, subject, cleaned body text, and tags.

### Request Payload

```json
{
  "sender": "alice@example.com",
  "subject": "Important Update",
  "body": "<p>Your HTML email body here</p>"
}
```

### Backend Processing

- HTML is stripped from the body using regex.

- Body is truncated to 2500 characters for Slack compatibility.

### Slack Message Format (Block Kit)

- Header: Subject
- Fields: From
- Body: Cleaned and truncated body
- Context: Tags shown in monospace

Example Slack message:

```yaml
New Email: Important Update
From: alice@example.com
---
Email Body:
Please note that your account...

Tags: `job`, `phishing`
```
